# TODOs â€” 2025-09-23 (Persisted)

Purpose: Durable, high-signal goals that must survive autosummarization.

## Data Quality & ETL (strictness first)
- Remove review snippet fallback (DONE). Fail fast when no real reviews are returned; configurable via `Seeding:FailOnNoReviews=true`.
- Enrich review schema (DONE, initial): `fullText`, `source=steam_review`, `lang`, `votesFunny`, `recommended`, `purchaseType`, `steamReviewId`, `createdAt`, `helpfulVotes`, `vector`.
- Add per-game vectors (DONE): embed short+detailed description into `games` container at path `/gvector`; vector policy/index created.
- Deterministic embedding fallback OFF by default; enable only via `Embeddings:AllowDeterministicFallback=true` when explicitly desired.
- Cap per-game review sampling default `Seeding:MaxReviewsPerGame=200`.

## Repository/Query alignment
- Api bootstrap now provisions games vector index (DONE). Next: add a games vector search path and blended hybrid ranking for titles+descriptions.
- Reviews repo uses `CosmosVectorQueryHelper` (OK). Next: extend for multilingual and expose `fullText` behind a `fields=full` param to control payload size.

## Tests & Contracts
- All tests green after strict ETL changes (Validated). Next: add tests for enriched review fields and ensure no Cosmos init during tests.
- Add contract for optional `fields=full` query switch on `/api/search/reviews` and grouped endpoint (TODO).

## Observability
- Log counts for: reviews fetched/page, filtered-out empties, persisted docs per app, and per-error reason (TODO).
- Record arity resolution for vector distance per container (already cached); consider emitting as metric (TODO).

## Next Implementations
1) Add `CosmosGamesRepository` vector search over `/gvector`; a new `/api/search/games` hybrid path that blends title CONTAINS + vector.
2) Expose `source` and `lang` in response DTOs; optionally include `fullText` when requested.
3) Convergence: implement `minReviewMatches` and `requireGameAndReview` filters on the grouped endpoint.
4) Data dictionary: start `docs/data-dictionary.md` capturing STEAM fields, normalization rules, and conversions (practical subset first).

Notes
- See 2023 SteamSeeker notebooks for normalization and category/tag handling; we merged categories as a fallback for tags when genres missing.
